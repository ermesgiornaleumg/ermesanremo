<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ErmeSanremo | ERMES</title>
  <meta name="description" content="ErmeSanremo: calendario serate, pagelle e classifica Spotify a cura della redazione ERMES." />

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XVPFB6T2W7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XVPFB6T2W7');
</script>

  <style>
    :root{
      --bg:#0b0b12;
      --card:#111122;
      --text:#f2f2ff;
      --muted:#b8b8d6;
      --border: rgba(255,255,255,.10);
      --accent:#7c5cff;
      --accent2:#19d3ff;
      --btn:#ffffff;
      --btnText:#0b0b12;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
    }
    *{ box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 600px at 20% -10%, rgba(124,92,255,.35), transparent 55%),
                  radial-gradient(900px 500px at 90% 10%, rgba(25,211,255,.25), transparent 50%),
                  linear-gradient(180deg, #0b0b12, #07070c 70%);
      color: var(--text);
      line-height:1.55;
    }
    .wrap{ max-width: 1060px; margin: 0 auto; padding: 0 18px; }

    header{
      position: relative;
      padding: 28px 0 18px;
      border-bottom: 1px solid var(--border);
      overflow:hidden;
    }
    .stageGlow{
      position:absolute; inset:-80px -60px auto -60px;
      height: 220px;
      background:
        radial-gradient(500px 120px at 25% 60%, rgba(124,92,255,.35), transparent 60%),
        radial-gradient(480px 120px at 75% 40%, rgba(25,211,255,.30), transparent 60%);
      filter: blur(14px);
      pointer-events:none;
    }
    .topRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      flex-wrap: wrap;
    }
    .brand{
      display:flex;
      align-items:center;
      gap: 14px;
      flex-wrap: wrap;
    }
    .logo{
      height: 56px;
      width:auto;
      display:block;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.35));
    }
    .tagline{
      margin:0;
      color: var(--muted);
      font-size: 14px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border:1px solid var(--border);
      border-radius: 999px;
      background: rgba(255,255,255,.03);
      backdrop-filter: blur(6px);
      font-size: 13px;
      color: var(--muted);
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 0 18px rgba(124,92,255,.55);
    }

    nav{
      margin-top: 14px;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .navlink{
      text-decoration:none;
      padding: 9px 12px;
      border-radius: 12px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      color: var(--text);
      font-size: 14px;
    }
    .navlink:hover{ border-color: rgba(255,255,255,.22); }

    main{ padding: 18px 0 26px; }

    .hero{
      margin-top: 18px;
      border:1px solid var(--border);
      border-radius: 18px;
      background: linear-gradient(135deg, rgba(124,92,255,.10), rgba(25,211,255,.08));
      box-shadow: var(--shadow);
      padding: 18px;
      position: relative;
      overflow:hidden;
    }
    .hero::after{
      content:"";
      position:absolute; inset:-40px;
      background: radial-gradient(380px 160px at 30% 30%, rgba(255,255,255,.10), transparent 70%);
      filter: blur(6px);
      pointer-events:none;
    }
    .hero h1{
      margin:0 0 8px;
      font-size: 26px;
      letter-spacing:.2px;
      position:relative;
      z-index:1;
    }
    .hero p{
      margin:0;
      color: var(--muted);
      position:relative;
      z-index:1;
    }

    .section{
      margin-top: 14px;
      border:1px solid var(--border);
      border-radius: 18px;
      background: rgba(255,255,255,.03);
      box-shadow: var(--shadow);
      padding: 16px;
    }
    .sectionHead{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }
    .kicker{
      color: var(--muted);
      font-size: 13px;
      margin: 0;
    }

    /* CALENDARIO */
    .calGrid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 12px;
      margin-top: 10px;
    }
    .calItem{
      border:1px solid var(--border);
      border-radius: 16px;
      padding: 14px;
      background: rgba(0,0,0,.18);
      text-decoration:none;
      display:block;
    }
    .calItem:hover{ border-color: rgba(255,255,255,.22); }
    .calTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .badge{
      padding: 6px 10px;
      border-radius: 999px;
      font-weight: 800;
      background: linear-gradient(135deg, rgba(124,92,255,.35), rgba(25,211,255,.25));
      border:1px solid rgba(255,255,255,.12);
      min-width: 84px;
      text-align:center;
      color: var(--text);
      font-size: 13px;
    }
    .calMeta{ margin-top: 8px; color: var(--muted); font-size: 14px; }

    /* SPOTIFY */
    .spotifyFrame{
      width: 100%;
      border: 1px solid var(--border);
      border-radius: 16px;
      overflow:hidden;
      background: rgba(0,0,0,.22);
    }
    iframe{ display:block; width:100%; border:0; }

    /* PAGELLE */
    .pagelleGrid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 12px;
      margin-top: 10px;
    }
    .pagella{
      border:1px solid var(--border);
      border-radius: 16px;
      padding: 14px;
      background: rgba(0,0,0,.18);
    }
    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    footer{
      border-top: 1px solid var(--border);
      padding: 20px 0;
      color: var(--muted);
      text-align:center;
      font-size: 14px;
    }
  </style>
</head>

<body>
  <header>
    <div class="stageGlow"></div>

    <div class="wrap">
      <div class="topRow">
        <div class="brand">
          <img class="logo" src="foto/logo.png" alt="ErmeSanremo - ERMES" />
          <p class="tagline">Speciale ERMES • calendario serate • pagelle • playlist della redazione</p>
        </div>

        <div class="pill">
          <span class="dot"></span>
          <span>Aggiornamenti durante il Festival</span>
        </div>
      </div>

      <nav>
        <a class="navlink" href="https://ermesanremo.ermes-umg.it/liveblog/">Liveblog</a>
        <a class="navlink" href="#calendario">Commento serata</a>
        <a class="navlink" href="#spotify">Classifica Spotify</a>
        <a class="navlink" href="sondaggio/">Sondaggio</a>
        <a class="navlink" href="#pagelle">Pagelle</a>
        <a class="navlink" href="#link">Link</a>
      </nav>

      <section class="hero">
        <h1>ErmeSanremo</h1>
        <p>Sezione speciale ERMES: ogni serata ha la sua pagina con commento, highlights e momenti iconici.</p>
      </section>
    </div>
  </header>

  <main>
    <div class="wrap">

      <!-- ✅ CALENDARIO (solo questo al posto del commento in home) -->
      <section class="section" id="calendario">
        <div class="sectionHead">
          <div>
            <h2 style="margin:0 0 6px;">Commento serata</h2>
            <p class="kicker">Ogni giorno successivo al festival alle 12:00 ci sarà il commento di Antongiulio Iorfida.</p>
          </div>
        </div>

        <div class="calGrid">

           <a class="calItem" href="liveblog/">
            <div class="calTop">
              <strong>i commenti in diretta</strong>
              <span class="badge">LIVE</span>
            </div>
          </a>
          
          <a class="calItem" href="serate/serata-1.html">
            <div class="calTop">
              <strong>24 febbraio</strong>
              <span class="badge">COMMENTO</span>
            </div>
          </a>

          <a class="calItem" href="serate/serata-2.html">
            <div class="calTop">
              <strong>25 febbraio</strong>
              <span class="badge">COMMENTO</span>
            </div>
          </a>

          <a class="calItem" href="#">
            <div class="calTop">
              <strong>26 febbraio</strong>
              <span class="badge">COMMENTO</span>
            </div>
          </a>

               <a class="calItem" href="#">
            <div class="calTop">
              <strong>27 febbraio</strong>
              <span class="badge">COMMENTO</span>
            </div>
          </a>
          

          <a class="calItem" href="#">
            <div class="calTop">
              <strong>Finale - 28 febbraio</strong>
              <span class="badge">COMMENTO</span>
            </div>
          </a>
        </div>
      </section>

      <!-- SPOTIFY -->
      <section class="section" id="spotify">
        <div class="sectionHead">
          <div>
            <h2 style="margin:0 0 6px;">Classifica Spotify della redazione</h2>
            <p class="kicker">Playlist aggiornata da Benedetta Punturiero a seconda dei "rumors" del Festival </p>
          </div>
        </div>

        <div class="spotifyFrame">
          <iframe
            style="border-radius:16px"
            src="https://open.spotify.com/embed/playlist/2BmKXIBxGzOQxaQf6ijad8?utm_source=generator"
            height="380"
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
            loading="lazy"></iframe>
        </div>
      </section>

 <section class="section" id="pagelle">
  <div class="sectionHead">
    <div>
      <h2 style="margin:0 0 6px;">Pagelle dei lettori</h2>
      <p class="kicker">Media “voti” + classifiche basate sui sondaggi, dati e classifiche revisionati da Bruno Rachiele</p>
    </div>
  </div>

  <!-- Media voto -->
  <div class="pagelleGrid">
    <div class="pagella">
      <div class="row">
        <strong>Voto serata (media)</strong>
        <span class="badge" id="media_generale">--</span>
      </div>
      <div class="calMeta" id="voti_generali">0 voti</div>
    </div>
  </div>

  <!-- Classifiche -->
  <div class="grid" style="margin-top:14px;">
    <div class="card">
      <h3 style="margin:0 0 8px;">Top 5 — Migliori</h3>
      <ol id="top5_migliori" style="margin:0; padding-left:18px; color: var(--muted);">
        <li>Caricamento…</li>
      </ol>
    </div>

    <div class="card">
      <h3 style="margin:0 0 8px;">Bottom 3 — Peggiori</h3>
      <ol id="top3_peggiori" style="margin:0; padding-left:18px; color: var(--muted);">
        <li>Caricamento…</li>
      </ol>
    </div>
  </div>

  <script>
    const URL_SONDAGGIO = "https://script.google.com/macros/s/AKfycbxHlQdr1dGB16xIKOeEMr-cpSHVXlGLA5Qe0XqTnp7Uc-0Qx1dPljzCV1W3IwZqKJc/exec";

    function renderList(elId, items, emptyText) {
      const el = document.getElementById(elId);
      if (!el) return;

      if (!items || !items.length) {
        el.innerHTML = "<li>" + emptyText + "</li>";
        return;
      }

      el.innerHTML = items.map(it => {
        const label = (it.label ?? "").toString();
        const voti = Number(it.voti ?? 0);
        return `<li>${label} <span style="opacity:.85;">— ${voti}</span></li>`;
      }).join("");
    }

    fetch(URL_SONDAGGIO + "?t=" + Date.now(), { cache: "no-store" })
      .then(r => r.text())
      .then(text => {
        let d;
        try { d = JSON.parse(text); }
        catch { throw new Error("Risposta non JSON: " + text.slice(0, 120)); }

        if (d.error) throw new Error(d.error);

        // media + voti
        const media = (d.media === null || d.media === undefined) ? "--" : Number(d.media).toFixed(2);
        const voti  = (d.voti === null || d.voti === undefined) ? 0 : Number(d.voti);

        document.getElementById("media_generale").textContent = media;
        document.getElementById("voti_generali").textContent = voti + " voti";

        // classifiche
        renderList("top5_migliori", d.top5_migliori, "Ancora nessun voto.");
        renderList("top3_peggiori", d.top3_peggiori, "Ancora nessun voto.");
      })
      .catch(err => {
        document.getElementById("media_generale").textContent = "--";
        document.getElementById("voti_generali").textContent = "Errore caricamento dati";
        document.getElementById("top5_migliori").innerHTML = "<li>Errore caricamento dati</li>";
        document.getElementById("top3_peggiori").innerHTML = "<li>Errore caricamento dati</li>";
        console.error("Errore pagelle:", err);
      });
  </script>
</section>

      <!-- LINK -->
      <section class="section" id="link">
        <div class="sectionHead">
          <div>
            <h2 style="margin:0 0 6px;">Link</h2>
            <p class="kicker">Sito ERMES e canali social.</p>
          </div>
        </div>

        <div class="calGrid">
          <a class="calItem" href="https://www.ermes-umg.it" target="_blank" rel="noreferrer">
            <div class="calTop">
              <strong>Vai al sito ERMES</strong>
              <span class="badge">LINK</span>
            </div>
            <div class="calMeta">Torna al sito principale del giornalino</div>
          </a>

          <a class="calItem" href="https://www.instagram.com/ermes_umg_magazine/" target="_blank" rel="noreferrer">
            <div class="calTop">
              <strong>Instagram</strong>
              <span class="badge">SOCIAL</span>
            </div>
            <div class="calMeta">Resta sempre aggiornato sui nostri social</div>
          </a>
        </div>
      </section>

    </div>
  </main>

  <footer>
    ERMES • ErmeSanremo — @rachielebruno
  </footer>
</body>
</html>
